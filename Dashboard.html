<!-- Save this as index.html --><!DOCTYPE html><html lang="en">  <head>  
  <meta charset="UTF-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>  
  <title>Qudox Wallet Dashboard</title>  
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">  
  <script src="https://unpkg.com/feather-icons"></script>  
  <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>  
  <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>  
  <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>  
  <style>  
    * {  
      margin: 0;  
      padding: 0;  
      box-sizing: border-box;  
      font-family: 'Orbitron', sans-serif;  
    }body {  
  background-color: #0d0d0d;  
  color: white;  
  padding-bottom: 80px;  
}  header {
display: flex;
justify-content: space-between;
align-items: center;
padding: 20px;
background: #111;
}

.logo {
font-size: 24px;
font-weight: bold;
position: relative;
color: #00ffcc;
overflow: hidden;
}

.logo::before,
.glitch-btn::before {
content: attr(data-glitch);
position: absolute;
left: 2px;
top: 0;
color: #ff00ff;
opacity: 0.7;
animation: glitch 1.5s infinite linear alternate-reverse;
}

.glitch-btn::before {
top: 0;
left: 0;
color: #ff00ff;
clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
}

@keyframes glitch {
0% { transform: translate(0); }
20% { transform: translate(-1px, 1px); }
40% { transform: translate(1px, -1px); }
60% { transform: translate(-2px, 2px); }
80% { transform: translate(2px, -2px); }
100% { transform: translate(0); }
}

.icons a i {
color: #00ffcc;
font-size: 22px;
margin-left: 16px;
}

.balance-card {
background: #1a1a1a;
margin: 20px;
padding: 20px;
border-radius: 16px;
box-shadow: 0 4px 10px #00ffcc55;
}

.balance-card h2 {
font-size: 18px;
color: #aaa;
}

.balance {
font-size: 28px;
margin: 10px 0;
}

.withdraw-btn {
background: #00ffcc;
color: black;
padding: 10px 20px;
border: none;
border-radius: 8px;
font-weight: bold;
cursor: pointer;
margin-top: 10px;
position: relative;
}

.withdraw-btn.glitch-btn {
overflow: hidden;
}

.progress-bar {
background: #333;
border-radius: 8px;
overflow: hidden;
height: 10px;
margin-top: 16px;
}

.progress-bar-fill {
height: 100%;
width: 65%;
background: #00ffcc;
}

.action-buttons {
display: flex;
justify-content: space-around;
margin: 30px 20px;
flex-wrap: wrap;
gap: 16px;
}

.action a {
text-align: center;
display: flex;
flex-direction: column;
align-items: center;
text-decoration: none;
}

.action a i {
background: #00ffcc;
padding: 15px;
border-radius: 50%;
color: black;
margin-bottom: 8px;
position: relative;
}

.action a span {
font-size: 12px;
color: #ccc;
}

.bottom-nav {
position: fixed;
bottom: 0;
left: 0;
width: 100%;
background: #111;
display: flex;
justify-content: space-around;
padding: 10px 0;
box-shadow: 0 -4px 10px #000;
z-index: 100;
}

.bottom-nav a i {
color: #00ffcc;
}

.bottom-nav a.add {
background: #00ffcc;
padding: 10px;
border-radius: 50%;
color: black;
margin-top: -20px;
}
.referral-section {
border-bottom: 2px solid white; /* underline with referral color */
padding-bottom: 10px;
margin-bottom: 20px;
font-weight: 600;
font-size: 1.1rem;
}
.referral-section p {
margin: 0 0 8px 0;
}
.referral-section a {
text-decoration: underline;
font-weight: 700;
font-size: 0.95rem;
}
.referral-section button {
margin-top: 8px;
padding: 8px 15px;
border-radius: 6px;
border: none;
cursor: pointer;
background: white;
color: #000;
font-weight: 700;
transition: background-color 0.3s ease;
}
.referral-section button:hover {
background-color: white;
}
/* ðŸ”” Custom Notification Styles */
.notification {
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 12px 18px;
  border-radius: 8px;
  font-weight: bold;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.4s ease-in-out;
  z-index: 10000;
  pointer-events: none;
  color: white;
}

.notification.show {
  opacity: 1;
  transform: translateY(0);
}

/* ðŸŽ¨ Notification Colors */
.notification.success {
  background: #00ffcc; /* Greenish */
  color: black;
}

.notification.error {
  background: #ff3b30; /* Red */
}

.notification.warning {
  background: #ffcc00; /* Yellow */
  color: black;
}
/* ðŸ”¥ Loading Screen */
#loading-screen {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: #0d0d0d;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  color: #00ffcc;
  font-size: 18px;
}

.loader {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

.loader span {
  width: 15px;
  height: 15px;
  background: #00ffcc;
  border-radius: 50%;
  animation: bounce 0.6s infinite alternate;
}

.loader span:nth-child(2) { animation-delay: 0.2s; }
.loader span:nth-child(3) { animation-delay: 0.4s; }

@keyframes bounce {
  to { transform: translateY(-10px); opacity: 0.7; }
}
  </style>  
</head>  
<body> 
<!-- Loading Screen -->
<div id="loading-screen">
  <div class="loader">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <p>Loading Qudox...</p>
</div>
<!-- ðŸ”” Notification -->
<div id="notification" class="notification"></div>
<header>  
    <div class="logo" data-glitch="Qudox">Qudox</div>  
    <div class="icons">  
      <a href="profile.html"><i data-feather="user"></i></a>  
    </div>  
  </header>  <section class="balance-card">  
    <h2>Available Balance</h2>  
    <div class="balance" id="balance">â‚¦0.00</div>  
    <a href="withdraw.html">  
      <button class="withdraw-btn glitch-btn" data-glitch="Withdraw">Withdraw</button>  
    </a>  
    <div class="progress-bar">  
      <div class="progress-bar-fill"></div>  
    </div>  
  </section>  <section class="action-buttons">  
    <div class="action">  
      <a href="buy-QDX.html"><i data-feather="shopping-cart" class="glitch-btn" data-glitch=""></i><span>Buy QDX</span></a>  
    </div>  
    <div class="action">  
      <a href="mine.html"><i data-feather="play-circle" class="glitch-btn" data-glitch=""></i><span>Mine</span></a>  
    </div>  
    <div class="action">  
      <a href="airtime.html"><i data-feather="smartphone" class="glitch-btn" data-glitch=""></i><span>Airtime</span></a>  
    </div>  
    <div class="action">  
      <a href="data.html"><i data-feather="wifi" class="glitch-btn" data-glitch=""></i><span>Data</span></a>  
    </div>  
  </section>  <nav class="bottom-nav">  
    <a href="community.html"><i data-feather="credit-card"></i></a>  
       <a href="about.html" class="about"><i data-feather="info"></i></a>  
    <a href="data.html"><i data-feather="bar-chart-2"></i></a>  
  </nav>      <div class="referral-section" style="text-align:center; margin: 20px auto; max-width: 350px; color: #00ffcc;">  
    <h3 style="text-decoration: underline; margin-bottom: 12px;">Referrer System</h3>  
  <a href="#" id="referralLink" target="_blank" style="word-break: break-all; color: #00ffcc;"></a>  
  <button id="copyReferralBtn" style="...">Copy Link</button>  
  <p style="margin-top: 12px;">Total Referrals: <span id="referralCount">0</span></p>  
</div>  
  <div id="premiumAlert">  
    <div class="box">  
      <h2>ðŸ”’ Premium Access Only</h2>  
      <p>This feature is available for premium users only. Upgrade your account to unlock exclusive tools and protection.</p>  
      <button onclick="hidePremiumAlert()">Okay</button>  
    </div>  
  </div>  
  <script>  
  feather.replace();  
</script>  
  <script type="module">
  // Import Firebase SDKs
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import {
    getAuth,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import {
    getFirestore,
    doc,
    getDoc,
    setDoc,
    updateDoc
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyAtsUgFSLRl3efgiRTWUM-4SWu0NNTnnmY",
    authDomain: "qudox-c4ffe.firebaseapp.com",
    projectId: "qudox-c4ffe",
    storageBucket: "qudox-c4ffe.appspot.com",
    messagingSenderId: "499837322901",
    appId: "1:499837322901:web:e5baca4d53b1bb6ca1fd9c"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const balanceDisplay = document.getElementById("balance");

      // --- Show premium alert ---
// Make the function global so it can be called from dynamically created button
window.hidePremiumAlert = function() {
  document.getElementById("premiumAlert").style.display = "none";
};

function copyReferralLink() {
  const link = document.getElementById("referralLink").href;
  navigator.clipboard.writeText(link)
.then(() => {
  showNotification("Referral link copied!", "success");
})
.catch(() => {
  showNotification("Failed to copy link.", "error");

      // Update h2 and paragraph instead of replacing entire innerHTML
      let title = box.querySelector("h2");
      let message = box.querySelector("p");
      let button = box.querySelector("button");

      if (title) title.textContent = "ðŸ”— Referral Link Copied!";
      if (message) message.textContent = "Your referral link has been copied to clipboard. Share it with your friends to earn rewards!";
      if (button) button.onclick = hidePremiumAlert;

      premiumAlert.style.display = "flex";
    })
    .catch(() => {
      alert("Failed to copy referral link. Please copy manually.");
    });
}

// Attach event listener
document.getElementById("copyReferralBtn").addEventListener("click", copyReferralLink);

// --- Auth Listener ---
onAuthStateChanged(auth, async (user) => {
  if (user) {
    const uid = user.uid;
    const userRef = doc(db, "users", uid);
    const userSnap = await getDoc(userRef);

    let data;
    if (!userSnap.exists()) {
      // New user
      data = { balance: 3000, referrals: 0, referralCode: uid, createdAt: Date.now() };
      await setDoc(userRef, data);
    } else {
      data = userSnap.data();
      if (!data.balance || data.balance === 0) {
        data.balance = 3000;
        await updateDoc(userRef, { balance: 3000, createdAt: Date.now() });
      }
    }

    // Show balance
    animateBalance(data.balance ?? 0);


    // --- Referral Code & Link ---
    const referralCode = data.referralCode || uid;
    const referralLink = `${window.location.origin}/register?ref=${referralCode}`;

    const referralLinkElement = document.getElementById("referralLink");
    if (referralLinkElement) {
      referralLinkElement.textContent = referralLink;
      referralLinkElement.href = referralLink;
    }

    const referralCountElement = document.getElementById("referralCount");
    if (referralCountElement) {
      referralCountElement.textContent = data.referrals || 0;
    }

  } else {
    // Not logged in â€” redirect
    window.location.href = "index.html";
  }
});
// ðŸ”¥ Place this OUTSIDE of onAuthStateChanged
function animateBalance(targetAmount) {
  let balanceElement = document.getElementById("balance");
  let current = 0;
  let increment = Math.ceil(targetAmount / 100); 
  let interval = setInterval(() => {
    current += increment;
    if (current >= targetAmount) {
      current = targetAmount;
      clearInterval(interval);
    }
    balanceElement.textContent = `â‚¦${current.toLocaleString()}.00`;
  }, 20);
}
// ðŸ”” Show Notification
window.showNotification = function(message, type = "success") {
  const notification = document.getElementById("notification");
  notification.className = "notification"; // Reset
  notification.classList.add(type);
  notification.textContent = message;
  notification.classList.add("show");

  setTimeout(() => {
    notification.classList.remove("show");
  }, 3000);
};
</script>
<!-- OneSignal Push Notification -->  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>  <script>  
  window.OneSignalDeferred = window.OneSignalDeferred || [];  
  OneSignalDeferred.push(async function(OneSignal) {  
    await OneSignal.init({  
      appId: "934a0c87-9dcd-4a96-9727-789deec17f0c",  
    });  
  });  
</script>  
<script>
  // ðŸ”¥ Keep loading screen for at least 6 seconds
  window.addEventListener("load", () => {
    setTimeout(() => {
      document.getElementById("loading-screen").style.display = "none";
    }, 3000); // 6000ms = 6 seconds
  });
</script>
</body>  
</html>